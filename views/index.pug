extends layout.pug

block content 

    main.main-content(role='main')
        .container-fluid
            .row.justify-content-center
                .col-12
                    .mx-auto.text-center.justify-content-center.py-5.my-5
                        img.avatar-img(src='../../css/icon/serval.png' style='width: 90px; height: 90px; margin-bottom: 15px;')
                        h1.page-title.mb-0(style='font-size: 3rem;') ServalRunÂ®
                        p.lead.text-dark.mb-4(style='font-size: 2rem;') Test Your Server as Rapid as Serval. 

                        .row.my-4
                            .col-md-6
                                .card.shadow.bg-primary.text-center.mb-4
                                    .card-body.p-5
                                        span.circle.circle-md.bg-primary-light
                                            i.fe.fe-navigation.fe-24.text-white
                                        h3.h4.mt-4.mb-1.text-white(style='font-size: 1.5rem;') Create an Account
                                        p.text-white.mb-4(style='font-size: 1.2rem;') Start your test journey with serval
                                        a.btn.btn-lg.bg-primary-light.text-white.btn-user(href='http://localhost:3001/user' style='font-size: 1.2rem;')
                                            | Sign Up
                                            i.fe.fe-arrow-right.fe-16.ml-2
                                    // .card-body
                                    // .card
                                // .col-md
                            .col-md-6
                                .card.shadow.bg-success.text-center.mb-4
                                    .card-body.p-5
                                        span.circle.circle-md.bg-success-light
                                            i.fe.fe-message-circle.fe-24.text-secondary
                                        h3.h4.mt-4.mb-1.text-dark(style='font-size: 1.5rem;')  Already have an account?
                                        p.text-dark.mb-4(style='font-size: 1.2rem;')  Sign in to check your own reports
                                        a.btn.btn-lg.bg-success-light.text-dark.btn-user(href='http://localhost:3001/user' style='font-size: 1.2rem;')
                                            | Sign In
                                            i.fe.fe-arrow-right.fe-16.ml-2
                                    // .card-body
                                    // .card
                                // .col-md
    script. 
        $('.btn-profile').on('click', function (event) {
            console.log('my profile clicked');
            event.preventDefault();

            axios({
                method: 'get',
                url: '/profile',
                headers: { 'Content-Type': 'application/json' },
            })
                .then((response) => {
                if (response.status === 200) {
                    window.location.assign('http://localhost:3001/profile');
                }
                })
                .catch((error) => {
                console.log('catch error: ', error);
                if (error.response.status === 403) {
                    swal({
                    text: 'Please log in first',
                    icon: 'error',
                    confirmButtonClass: 'btn-danger',
                    });
                    setTimeout(() => {
                    window.location.assign('http://localhost:3001/user');
                    }, 3000);
                } else {
                    swal({
                    text: 'Redirect failed',
                    icon: 'error',
                    confirmButtonClass: 'btn-danger',
                    });
                    setTimeout(() => {
                    window.location.assign('http://localhost:3001/');
                    }, 3000);
                }
                });
        });
